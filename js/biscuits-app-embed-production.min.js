window.BiscuitsBundle=window.BiscuitsBundle||{},window.BiscuitsBundle.InitialiseBundleButtons=function(){function t(){this.bindData(),void 0!==this.bundleIds&&null!==this.bundleIds&&0!==this.bundleIds.length&&(this.globalProductFormSelectors=["[data-product-info]",".product-information","[data-product-blocks]",".main-product",".product__page",".product__section-container",".product-single__meta",".product-content-container",".product__details","product-rerender",".product-content-wrapper",".main--product-info-container",".single__product",".product-column-right",".product-section .product-page form"],this.globalQuickAddSelectors=["add-to-cart",".product--quick-add--icon","[data-quick-add]","[data-add-to-cart]",".quick-add-btn",".product-card__quick-add-button",".product-card--add-to-cart-button",".quick-add form button",".card__quick-buttons button","product-quick-add button",".quick__form button","form .btn--add-to-cart",".card__quick-add form button",".quick-add-wrapper form button",".card__add-to-cart button",".product__quickbuy button",".product-item__quick-form button",".quick-buy-product-form button",".product-item button","[data-js-product-add-to-cart]",".js-ajax-submit",".product-card .product-form__cart-submit",".product-card__atc",".productitem--action-atc",".product-item__quick-add","quick-add-bulk",".product-item__quick-add-qty-selector",".card-product__sizes-btn.js-btn-size",".cc-quick-buy-btn","product-card [data-product-card-button]:not([data-quick-view-button])",".product__add-to-cart",".Sd_addProduct",".wbproduct-container form button",".product-card .form-card button",".product-card .form-card .input-amount",".group\\/product button",".m-add-to-cart",".boost-sd__button",".product-card__button",".card-product__quick-add"],this.globalGridItemSelectors=[".grid__item","product-card","product-grid-item",".product-item","[data-product-item]",".product-card",".collection-product-card",".collection__page-product","card-product",".product-tile",".product-block",".product-loop__item",".product--card",".product-holder",".yv-product-card",".group\\/product",".m-product-card",".boost-sd__product-item"],this.globalQuickViewSelectors=["quick-view",".btn-quickview",".product__quickbuy",".quick-view__button","[data-quickshop-full]","quick-view-drawer",".product-item__quick-view-button",".quick-product__btn",".collection__page-product .js-quickview-trigger",".product-card__quickview",".open-quick-view--btn","[data-quick-view-button]","[product-quickview-btn]",".product-quickview",".quickView",".quick-view__submit","modal-opener .quick-add__submit",".quick-shop__trigger",".quick-view-button .product-cart-btn",".quickbuy-toggle","modal-opener .card__link"],this.productGridItemQuery=this.gridItemSelector.length>0?this.gridItemSelector.split(" ").join(","):this.globalGridItemSelectors.join(","),this.productFormClasses=this.productPageFormSelector.length>0?[this.productPageFormSelector]:this.globalProductFormSelectors,"off"!=this.quickAddDisplayRule&&"off"!=this.quickViewDisplayRule?this.initBothButtons():"off"!=this.quickAddDisplayRule?this.initQuickAddButtons():"off"!=this.quickViewDisplayRule&&this.initQuickViewButtons())}return t.prototype={bindData:function(){this.quickAddRules=window.BiscuitsBundle.quickAddRules,this.isProductPage=window.location.href.indexOf("/products/")>-1,this.quickAddRules&&(this.bundleIds=this.quickAddRules.bundleProductIds,this.quickAddButtonSelector=this.quickAddRules.quickAddSelector,this.quickViewButtonSelector=this.quickAddRules.quickViewSelector,this.quickAddButtonClasses=this.quickAddRules.quickAddButtonClasses,this.quickAddDisplayRule=this.quickAddRules.quickAddDisplayRule,this.quickViewDisplayRule=this.quickAddRules.quickViewDisplayRules,this.gridItemSelector=this.quickAddRules.gridItemSelector,this.productPageFormSelector=this.quickAddRules.productPageFormSelector,this.linkText=this.quickAddRules.linkText||"View Bundle")},initBothButtons:function(){const t=this;t.applyBothButtons();const e=new MutationObserver((e=>{for(const i of e)if(i.addedNodes.length>0){t.applyBothButtons();break}}));e.observe(document.body,{childList:!0,subtree:!0}),t.bothButtonObserver=e},disconnectBothButtonObserver:function(){this.bothButtonObserver&&this.bothButtonObserver.disconnect()},initQuickAddButtons:function(){const t=this;t.applyQuickAddButtons();const e=new MutationObserver((e=>{for(const i of e)if(i.addedNodes.length>0){t.applyQuickAddButtons();break}}));e.observe(document.body,{childList:!0,subtree:!0}),t.quickAddObserver=e},disconnectQuickAddObserver:function(){this.quickAddObserver&&this.quickAddObserver.disconnect()},initQuickViewButtons:function(){const t=this;t.applyQuickViewButtons();const e=new MutationObserver((e=>{for(const i of e)if(i.addedNodes.length>0){t.applyQuickViewButtons();break}}));e.observe(document.body,{childList:!0,subtree:!0}),t.quickViewObserver=e},disconnectQuickViewObserver:function(){this.quickViewObserver&&this.quickViewObserver.disconnect()},applyBothButtons:function(){const t=this,e=t.quickAddButtonSelector.length>0?t.quickAddButtonSelector:t.globalQuickAddSelectors.join(","),i=t.quickViewButtonSelector.length>0?t.quickViewButtonSelector:t.globalQuickViewSelectors.join(","),o=document.querySelectorAll(e);if(0===o.length)return void t.applyQuickViewButtons();let u=0;o.forEach((e=>{if(t.isProductPage&&t._isProductPageForm(e))return;const o=t._isBundleProductButton(e);if(!o)return;if(e.dataset.biscuitsBundleButton)return;let d="";const c=e.closest(t.productGridItemQuery);if(c){const e=c.querySelector('a[href*="/products/"]');e&&(d=e.href),c.dataset.biscuitsBundleDetected=!0;const o=c.querySelector(i);if(o){if(o.dataset.biscuitsBundleButton)return;t._applyDisplayRule(o,t.quickViewDisplayRule)}}else u++;t._applyDisplayRule(e,t.quickAddDisplayRule,o,d)})),u>0&&t.applyQuickViewButtons()},_applyDisplayRule:function(t,e,i,o){switch(e){case"replace":this.replaceQuickAddButton(t,i,o);break;case"hide":this.hideButton(t);break;case"disable":this.disableButton(t)}},applyQuickAddButtons:function(){const t=this,e=t.quickAddButtonSelector.length>0?t.quickAddButtonSelector:t.globalQuickAddSelectors.join(",");document.querySelectorAll(e).forEach((e=>{if(t.isProductPage&&t._isProductPageForm(e))return;const i=t._isBundleProductButton(e);if(!i)return;if(e.dataset.biscuitsBundleButton)return;let o="";const u=e.closest(t.productGridItemQuery);if(u){const t=u.querySelector('a[href*="/products/"]');t&&(o=t.href),u.dataset.biscuitsBundleDetected=!0}t._applyDisplayRule(e,t.quickAddDisplayRule,i,o)}))},applyQuickViewButtons:function(){const t=this,e=t.quickViewButtonSelector.length>0?t.quickViewButtonSelector:t.globalQuickViewSelectors.join(",");let i=document.querySelectorAll(e);0!==i.length&&i.forEach((function(e){if(t.isProductPage&&t._isProductPageForm(e))return;t._isBundleProductButton(e)&&t._applyDisplayRule(e,t.quickViewDisplayRule)}))},hideButton:function(t){t.classList.add("disabled"),t.classList.add("biscuits--disabled"),t.classList.add("biscuits--hidden"),t.setAttribute("disabled",!0),t.style.display="none",t.style.visibility="hidden",t.style.pointerEvents="none",t.style.opacity="0"},disableButton:function(t){t.classList.add("disabled"),t.classList.add("biscuits--disabled"),t.setAttribute("disabled",!0)},removeButton:function(t){t.remove()},replaceQuickAddButton:function(t,e,i){const o=this;if("quick-add-bulk"===t.tagName.toLowerCase()||t.classList.contains("product-item__quick-add-qty-selector")||t.classList.contains("input-amount"))return void o.removeButton(t);let u=document.createElement("a");if("INPUT"===t.tagName)u.textContent=o.linkText;else{let e=t.cloneNode(!0);o._replaceButtonText(e),Array.from(e.childNodes).forEach((t=>{u.appendChild(t)}));let i=u.querySelector(".push-btn__surface");i&&i.removeAttribute("x-text")}if(u.href=i,u.dataset.biscuitsBundleButton=e,o.quickAddButtonClasses&&o.quickAddButtonClasses.length>0){o.quickAddButtonClasses.trim().replace(/\s+/g," ").split(" ").forEach((t=>{u.classList.add(t)}))}u=o._addButtonClasses(t,u),0===u.classList.length&&(u=o._applyButtonStyles(t,u)),u.style.textDecoration="none",t.replaceWith(u)},_replaceButtonText:function(t){const e=this,i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:t=>/\S/.test(t.nodeValue)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),o=[];for(;i.nextNode();)o.push(i.currentNode);let u=!1;if(o.length>0)for(let t=0;t<o.length;t++){o[t].nodeValue.toLowerCase().length>1&&!u?(o[t].nodeValue=e.linkText,u=!0):o[t].nodeValue=""}},_isProductPageForm:function(t){if(this.productFormClasses.some((e=>t.closest(e))))return!0;const e=t.closest('[action*="/cart/add"]');return!!e&&null!==e.querySelector('input[type="text"][name="properties[_bundleId]"].biscuits--hidden')},_isBundleProductButton:function(t){const e=this;let i=!1;const o=(t,e)=>t&&t.indexOf(e)>-1;return e.bundleIds.forEach((u=>{const d=t.closest('[action*="/cart/add"]');if(d&&e._isFormEligible(d,u)||t.form&&e._isFormEligible(t.form,u))return void(i=u);if([t.getAttribute("id"),t.dataset.id,t.dataset.index,t.dataset.variantId,t.dataset.variantid,t.dataset.variant,t.dataset.productId,t.dataset.product,Array.from(t.classList).join(",")].some((t=>o(t,u))))return void(i=u);let c=t.parentNode.dataset.id,r=t.parentNode.getAttribute("id");if(c&&o(c,u)||r&&o(r,u))return void(i=u);const s=t.closest(e.productGridItemQuery);if(s){if([s.dataset.productId,s.dataset.variantId].some((t=>o(t,u))))return void(i=u)}})),i},_isFormEligible:function(t,e){const i=t=>"string"==typeof t&&t.indexOf(e)>-1,o=i(t.getAttribute("id"));let u=!1;const d=t.elements.id||t.querySelector("#id");d&&d.value&&(u=i(d.value));const c=i(t.id);return o||u||c},_addButtonClasses:function(t,e){const i=["quick","add to cart","add-to-cart","buy","quick view","quick-view","quickview","quickbuy","quick-buy"];return Array.from(t.classList).forEach((t=>{const o=t.toLowerCase();i.some((t=>{const e=o.replace(/[- ]/g,""),i=t.replace(/[- ]/g,"");return e.includes(i)}))||e.classList.add(t)})),e},_applyButtonStyles:function(t,e){const i=window.getComputedStyle(t);return["padding","backgroundColor","color","border","borderRadius","cursor","textAlign","display","position","top","right","left","bottom","width","height","boxShadow","lineHeight","boxSizing","minHeight","alignItems","justifyContent","zIndex","pointerEvents"].forEach((t=>{e.style[t]=i[t]})),e.style.textDecoration="none",e.style.overflow="hidden",e}},t}(),window.BiscuitsBundle.bundleButtons=new window.BiscuitsBundle.InitialiseBundleButtons;